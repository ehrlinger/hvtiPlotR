% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mirror-histogram.R
\name{plot_mirror_histogram}
\alias{plot_mirror_histogram}
\title{Plot Mirrored Propensity Score Histogram}
\usage{
plot_mirror_histogram(
  data,
  score_col = "prob_t",
  group_col = "tavr",
  match_col = "match",
  group_levels = c(0, 1),
  group_labels = c("SAVR", "TF-TAVR"),
  matched_value = 1,
  score_multiplier = HVTI_SCORE_DEFAULT_MULTIPLIER,
  binwidth = 5,
  output_file = NULL,
  width = 8,
  height = 6
)
}
\arguments{
\item{data}{A data frame containing at least the score, group, and match
indicators.}

\item{score_col}{Column name holding the numeric propensity score.}

\item{group_col}{Column name identifying the grouping/treatment indicator.}

\item{match_col}{Column name indicating whether an observation is matched.}

\item{group_levels}{Length-2 vector giving the values in `group_col` that
should be plotted (order determines the panel orientation).}

\item{group_labels}{Length-2 character vector supplying human readable labels
for each group.}

\item{matched_value}{Value in `match_col` that denotes a matched observation.}

\item{score_multiplier}{Multiplier applied to `score_col` prior to plotting
(defaults to percentages).}

\item{binwidth}{Bin width, on the scaled score scale, used when computing the
histograms.}

\item{output_file}{Optional file path for saving the figure via `ggsave()`.}

\item{width, height}{Dimensions (inches) used when saving `output_file`.}
}
\value{
A list with elements `plot` (ggplot object), `diagnostics` (list of
  summary statistics), and `data` (the filtered data frame that was plotted).
}
\description{
Generates mirrored propensity score histograms for two treatment groups,
highlighting the distribution before and after matching. The returned list
contains the rendered plot, the filtered data used to draw it, and a set of
diagnostics (group counts, SMD values, summary statistics) that can be logged
or displayed in reports.
}
\examples{
# Create a sample data set
mirror_dta <- sample_mirror_histogram_data(n = 4000)

# Generate the figure
mhist <- plot_mirror_histogram(mirror_dta )

# The plot is returned in a list.
mhist$p

# Diagnostics are also returned, which can be logged or displayed in reports.
mhist$diagnostics

# The data used to draw the figure is also returned, which can be useful for
# debugging or further analysis.
head(mhist$data)

# By default, the figure uses the manuscript theme, but you can set it to
# any hvtiPlotR theme you like. For example:
ggplot2::set_theme(hvti_theme("manuscript"))
mhist$p

# You can modify the figure using scales:
mhist$p +
  ggplot2::scale_fill_manual(
    values = c(
      before_g0 = "white",
      matched_g0 = "green1",
      before_g1 = "white",
      matched_g1 = "green4"),
    guide = "none")
 
 # and annotations:
group_labels = c("SAVR", "TF-TAVR")
mhist$p +
  ggplot2::scale_fill_manual(
    values = c(
      before_g0 = "white",
      matched_g0 = "green1",
      before_g1 = "white",
      matched_g1 = "green4"),
    guide = "none")+
  ggplot2::annotate(
    "text",
    x = 0.8,
    y = 0.80,
    label = group_labels[1],
    size = 6
  ) +
  ggplot2::annotate(
    "text",
    x = 0.8,
    y = -0.80,
    label = group_labels[2],
    size = 6
  )

}
